# Сервис iotsim-core-api
# Локальный запуск сервиса с использованием Docker Compose

Эта инструкция поможет вам запустить сервис локально с использованием Docker и Docker Compose.

## Предварительные требования

Перед началом убедитесь, что у вас установлены следующие инструменты:

- [Docker](https://www.docker.com/get-started)
- [Docker Compose](https://docs.docker.com/compose/install/)

## Настройка

1. **Клонируйте репозиторий** :

   ```bash
   git clone <URL репозитория>

2. **Задайте параметры конфигурации для локальногого запуска** :
   
   В файлах `src/main/resources/application-dev.yaml` и `docker-compose.yaml` указываются параметры для локального запуска.
   
   По умолчанию сервис запускается на `8081` порте, а контейнеры с postgres и pgadmin - `15432` и `5050` соотвественно. Учтите это перед запуском, остальные параметры можно не менять.
3. **Запускаем приложение** :
   ```bash
   cd <директория проекта>
   docker-compose up
   
4. **Проверяем запуск контейнеров** :
   ```bash
   docker-compose ps
   ```
   Если контейнеры поднялись, можно зайти в pgadmin и проверить, что миграции liquebase успешно выполнились. Переходим по адресу `http://localhost:<pgadmin post>` или `http://localhost:5050`, если вы ничего не меняли. По умолчанию логин и пароль следующие
   ```
   PGADMIN_DEFAULT_EMAIL: admin@admin.com
   PGADMIN_DEFAULT_PASSWORD: root
   ```
   Также мы можем зайти в Swagger и проверить работу api. Переходим по адресу `http://localhost:<appilication port>/swagger-ui/index.html` или
   `http://localhost:8080/swagger-ui/index.html`, если вы ничего не меняли. Для полноценного использования api, нужно получить Jwt токен, это можно сделать через эндпоинт `/register` или `/login`, если у вас есть данные для входа.
   Получив в ответ токен, указываем его в поле для авторизации. После этого можно свободно выполнять запросы на все предоставленные эндпоинты.
5.  **Остановка приложения** :
   В той же директории выполняем
   ```bash
   docker-compose down
   ```
## Инструкцию по деплою на кластер: TBD